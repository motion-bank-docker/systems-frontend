(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"1N2q":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[t._v(t._s(t.videoTitle))])},o=[],r=(i("ls82"),i("yXPU")),a=i.n(r),s=(i("SRfc"),i("pIFo"),i("VRzm"),i("33yf")),c=i.n(s),l=i("CxY0"),u=i.n(l),d=i("ktc5"),m=i.n(d),p=function(t){var e=this,i=this;return Promise.resolve().then(function(){if(0===t.indexOf("http"))return".mp4"===c.a.extname(u.a.parse(t).path)&&(t=t.replace(/\.mp4/i,".html")),e.$axios.get("".concat(i.$globalConfig.app.hosts.api,"/proxy?url=").concat(encodeURIComponent(t))).then(function(t){var e=t.text.match(/<title[^>]*>([^<]+)<\/title>/)[1];return m.a.decode(e)}).catch(function(e){return console.warn("Error getting title for ".concat(t,": ").concat(e.message)),t})})},v={props:["source"],asyncComputed:{videoTitle:function(){var t=a()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p(this.source);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},f=v,h=i("KHd+");i.d(e,!1,function(){return p});var y=Object(h["a"])(f,n,o,!1,null,null,null);e["a"]=y.exports},"2Gtw":function(t,e,i){"use strict";i("f3/d");var n=i("cDf5"),o=i.n(n),r=i("lwsE"),a=i.n(r),s=i("W8MJ"),c=i.n(s),l=i("ExVU"),u=i("9lTW"),d=i.n(u);l["Settings"].defaultLocale=l["DateTime"].local().resolvedLocaleOpts().locale;var m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a()(this,t),this._dateTime=e?l["DateTime"].local().toUTC():l["DateTime"].local()}return c()(t,[{key:"setToUTC",value:function(){this._dateTime=this._dateTime.toUTC()}},{key:"toString",value:function(){return this.isoString}},{key:"toFormat",value:function(t){return d.a.equal(o()(t),"string"),this._dateTime.toFormat(t)}},{key:"add",value:function(t){d()("number"===typeof t||"Duration"===t.constructor.name),this._dateTime=this._dateTime.plus(t)}},{key:"subtract",value:function(t){d()("number"===typeof t||"Duration"===t.constructor.name),this._dateTime=this._dateTime.minus(t)}},{key:"isoString",set:function(t){d.a.equal(o()(t),"string"),this._dateTime=l["DateTime"].fromISO(t)},get:function(){return this._dateTime.toISO()}},{key:"millis",set:function(t){d.a.equal(o()(t),"number"),this._dateTime=l["DateTime"].fromMillis(t)},get:function(){return this._dateTime.valueOf()}},{key:"dateTime",set:function(t){d()(t instanceof l["DateTime"]),this._dateTime=l["DateTime"].fromISO(t.toISO())},get:function(){return this._dateTime}}],[{key:"fromISOString",value:function(e){var i=new t;return i.isoString=e,i}},{key:"fromMilliseconds",value:function(e){var i=new t;return i.millis=e,i}},{key:"fromDateTime",value:function(e){var i=new t;return i.dateTime=e,i}},{key:"timeBetween",value:function(t,e){return d.a.equal(t.constructor.name,"TimelineSelector"),d.a.equal(e.constructor.name,"TimelineSelector"),l["Interval"].fromDateTimes(t.dateTime,e.dateTime).toDuration()}}]),t}();e["a"]=m},"5dC8":function(t,e,i){},"6zVa":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("card-full",[i("q-btn",{attrs:{slot:"backButton",icon:"keyboard_backspace",small:"",round:""},on:{click:function(e){t.$router.push("/piecemaker/videos/"+t.$route.params.videoId+"/edit")}},slot:"backButton"}),i("div",{attrs:{slot:"form-logo"},slot:"form-logo"}),i("div",{attrs:{slot:"form-title"},slot:"form-title"}),i("div",{staticClass:"row",staticStyle:{"margin-top":"-2em"}},[i("div",{staticClass:"col-6 row"},[i("p",{staticClass:"col-12",staticStyle:{"min-height":"5em"}},[t._v("Video to be synchronized:"),i("br"),t.video?i("video-title",{attrs:{source:t.video.body.source}}):t._e()],1),t.video?i("div",{staticClass:"video col-12"},[i("video-player",{attrs:{src:t.video.body},on:{ready:function(e){t.onSrcPlayerReady(e)}}}),i("div",{staticClass:"col-12"}),i("q-btn",{on:{click:function(e){t.setMarker(t.srcPlayer)}}},[t._v(t._s(t.$t("buttons.set_marker")))]),i("br"),t.srcTimecode?i("q-btn",[t._v(t._s(t.srcTimecode))]):t._e()],1):t._e()]),i("div",{staticClass:"col-6 row"},[i("p",{staticClass:"col-12 text-right",staticStyle:{"min-height":"5em"}},[t._v("Synchronize with:"),i("br"),t.video&&t.refIndex>-1?i("video-title",{attrs:{source:t.refVideos[t.refIndex].body.source}}):t._e(),i("q-btn",{attrs:{small:""},on:{click:function(e){t.refIndex=-1}}},[t._v(t._s(t.$t("buttons.change")))])],1),i("div",{staticClass:"video col-12"},[t.video&&t.refIndex>-1?i("video-player",{attrs:{src:t.refVideos[t.refIndex].body},on:{ready:function(e){t.onTargetPlayerReady(e)}}}):t._e(),t.video&&-1===t.refIndex?i("q-list",{staticClass:"no-border"},t._l(t.refVideos,function(e,n){return i("q-item",{key:e.uuid,attrs:{highlight:""},on:{click:function(e){t.refIndex=n}}},[i("video-title",{attrs:{source:e.body.source}})],1)})):t._e()],1),t.video&&t.refIndex>-1?i("div",{staticClass:"col-12 text-right"},[i("q-btn",{on:{click:function(e){t.setMarker(t.targetPlayer,1)}}},[t._v(t._s(t.$t("buttons.set_marker")))]),i("br"),t.targetTimecode?i("q-btn",[t._v(t._s(t.targetTimecode))]):t._e()],1):t._e()])]),i("div",{staticClass:"text-center"},[i("q-btn",{attrs:{color:"primary"},on:{click:function(e){t.applySync()}}},[t._v(t._s(t.$t("buttons.apply_synchronisation")))])],1)],1)},o=[],r=i("GBbM"),a=i("huk2"),s=i("wbdi"),c=i("2Gtw"),l=i("hP65"),u=i("1N2q"),d={components:{CardFull:a["a"],VideoPlayer:l["a"],VideoTitle:u["a"]},data:function(){return{tcformat:s["a"].TIMECODE_FORMAT,group:void 0,video:void 0,refVideos:[],refIndex:-1,srcPlayer:void 0,srcTime:void 0,srcTimecode:void 0,srcSelector:void 0,targetPlayer:void 0,targetTime:void 0,targetTimecode:void 0,targetSelector:void 0}},mounted:function(){var t=this,e=this;this.$store.dispatch("annotations/get",this.$route.params.videoId).then(function(i){return e.video=i,e.$store.dispatch("maps/get",t.$route.params.groupId)}).then(function(t){e.group=t;var i={"target.id":t.uuid,"body.purpose":"linking"};return e.$store.dispatch("annotations/find",{query:i})}).then(function(t){e.refVideos=t.filter(function(t){return t.uuid!==e.$route.params.videoId})})},methods:{onSrcPlayerReady:function(t){this.srcPlayer=t},onTargetPlayerReady:function(t){this.targetPlayer=t},setMarker:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t){var i=c["a"].fromMilliseconds(1e3*t.currentTime());switch(e){case 1:this.targetSelector=i,this.targetTimecode=this.targetSelector.toFormat(s["a"].TIMECODE_FORMAT);break;default:this.srcSelector=i,this.srcTimecode=this.srcSelector.toFormat(s["a"].TIMECODE_FORMAT)}}},applySync:function(){var t=this,e=this,i=c["a"].timeBetween(this.srcSelector,this.targetSelector),n=this.video,o=c["a"].fromISOString(n.target.selector.value);o.add(i);var a={target:r["ObjectUtil"].merge({},n.target,{selector:{type:"Fragment",value:o.toString()}})};return this.$store.dispatch("annotations/patch",[n.uuid,a]).then(function(o){console.log("sync updated",t.targetSelector.millis,t.srcSelector.millis,i,n.uuid,o),e.$router.push("/piecemaker/videos/".concat(e.$route.params.videoId,"/edit"))})}}},m=d,p=(i("zVQS"),i("KHd+")),v=Object(p["a"])(m,n,o,!1,null,null,null);e["default"]=v.exports},84:function(t,e){},VDrJ:function(t,e,i){"use strict";var n=i("wh9e"),o=i.n(n);o.a},b2zc:function(t,e,i){t.exports=i.p+"img/motionbank-logo.53196fd.png"},hP65:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("video-player",{ref:"videoPlayer",staticClass:"video-player-box vjs-big-play-centered",attrs:{options:t.playerOptions,playsinline:!0,customEventName:"customstatechangedeventname"},on:{play:function(e){t.onPlayerEvent("play",e)},pause:function(e){t.onPlayerEvent("pause",e)},ended:function(e){t.onPlayerEvent("ended",e)},waiting:function(e){t.onPlayerEvent("waiting",e)},playing:function(e){t.onPlayerEvent("playing",e)},loadeddata:function(e){t.onPlayerEvent("data",e)},timeupdate:function(e){t.onPlayerEvent("time",e.currentTime())},canplay:function(e){t.onPlayerEvent("canplay",e)},canplaythrough:function(e){t.onPlayerEvent("canplaythrough",e)},statechanged:function(e){t.playerStateChange(e)},ready:t.onPlayerReady}})},o=[],r=i("1tPa");i("/aIJ"),i("RR9+"),i("49ep"),i("TG1J"),i("9aQL");var a={components:{videoPlayer:r["videoPlayer"]},data:function(){return{type:void 0,playerOptions:{fluid:!0,width:640,techOrder:["html5"],language:"en",playbackRates:[.25,.5,1,1.5,2],sources:[],poster:void 0,controlBar:{remainingTime:!0},plugins:{framebyframe:{fps:23.98,steps:[{text:"-1s",step:-24},{text:"-1f",step:-1},{text:"+1f",step:1},{text:"+1s",step:24}]}}}}},props:["src"],mounted:function(){this.src&&(this.type=this.guessType(this.src),"video/youtube"===this.type?this.playerOptions.techOrder=["youtube"]:"video/vimeo"===this.type&&(this.playerOptions.techOrder=["vimeo"]),this.setSources([{type:this.type,src:this.src.source}]))},watch:{src:function(t){this.type=this.guessType(t),t&&("video/youtube"===this.type?this.playerOptions.techOrder=["youtube"]:"video/vimeo"===this.type&&(this.playerOptions.techOrder=["vimeo"]),this.setSources([{type:this.type,src:t.source}]))}},computed:{player:function(){return this.$refs.videoPlayer.player}},methods:{guessType:function(t){return t.source.indexOf("youtube.com")>-1||t.source.indexOf("youtu.be")>-1?"video/youtube":t.source.indexOf("vimeo.com")>-1?"video/vimeo":null},onPlayerReady:function(t){this.$emit("ready",t),"video/youtube"===this.type||this.type},onPlayerEvent:function(t,e){this.$emit(t,e)},onPlayerStateChange:function(t){this.$emit("state-change",t)},setSources:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Array.isArray(t)||(t=[t]),this.playerOptions.sources=t,this.playerOptions.poster=e}}},s=a,c=i("KHd+"),l=Object(c["a"])(s,n,o,!1,null,null,null);e["a"]=l.exports},huk2:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-center items-center"},[n("div",{attrs:{id:"back-button"}},[t._t("backButton")],2),n("div",{staticClass:"column col-10"},[n("q-card",{staticClass:"full-width no-margin",attrs:{color:"dark"}},[n("div",{staticClass:"layout-padding"},[n("q-card-main",{staticClass:"no-margin"},[t._t("nav-button"),n("div",{staticClass:"row justify-between content-stretch"},[n("div",{staticClass:"column width-3of4"},[n("h5",{staticClass:"caption light-paragraph"},[t._t("form-title")],2),t._t("form-caption")],2),t._t("form-logo",[n("a",{staticClass:"gt-md logo",on:{click:function(e){t.openURL("http://www.motionbank.org")}}},[n("img",{staticClass:"responsive",attrs:{src:i("b2zc")}})])])],2)],2),n("q-card-main",{staticClass:"no-margin"},[t._t("default")],2)],1)]),n("site-footer")],1)])},o=[],r=i("4IOb"),a=i("vpOM"),s={components:{SiteFooter:a["a"]},data:function(){return{openURL:r["Ca"]}}},c=s,l=(i("VDrJ"),i("KHd+")),u=Object(l["a"])(c,n,o,!1,null,null,null);e["a"]=u.exports},kiQV:function(t){t.exports={b:"0.3.0",a:"MIT"}},n34Y:function(t,e,i){"use strict";var n=i("o89N"),o=i.n(n);o.a},o89N:function(t,e,i){},vpOM:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row full-width light-paragraph justify-between items-center generic-margin"},[i("div",{staticClass:"group",class:{"absolute-bottom-left":t.positionCorners,"layout-padding":t.positionCorners}},[i("small",{staticClass:"generic-margin"},[t._v(t._s(t.$t("site.copyright")))]),i("small",{staticClass:"generic-margin"},[i("a",{on:{click:function(e){t.openURL("http://motionbank.org/de/content/impressum")}}},[t._v(t._s(t.$t("navigation.imprint")))])]),i("small",{staticClass:"generic-margin"},[i("a",{on:{click:function(e){t.openURL("http://motionbank.org/de/content/kontakt")}}},[t._v(t._s(t.$t("navigation.contact")))])]),i("small",{staticClass:"generic-margin"},[i("a",{on:{click:function(e){t.openURL("http://motionbank.org/de/content/impressum")}}},[t._v(t._s(t.$t("navigation.terms")))])])]),i("div",{staticClass:"group",class:{"absolute-bottom-right":t.positionCorners,"layout-padding":t.positionCorners}},[i("small",{staticClass:"generic-margin"},[i("a",{on:{click:function(e){t.openURL("https://github.com/motionbank")}}},[t._v(t._s(t.$t("navigation.github")))])]),i("small",[t._v(t._s(t.$t("site.version"))+": v"+t._s(t.version))]),i("small",[t._v(t._s(t.$t("site.license"))+": "+t._s(t.license))])])])},o=[],r=i("4IOb"),a=i("kiQV"),s={data:function(){return{openURL:r["Ca"],version:a["b"],license:a["a"]}},props:["positionCorners"]},c=s,l=(i("n34Y"),i("KHd+")),u=Object(l["a"])(c,n,o,!1,null,null,null);e["a"]=u.exports},wbdi:function(t,e,i){"use strict";var n="Timeline",o="2DGrid",r="HH:mm:ss:SSS";e["a"]={MAP_TYPE_TIMELINE:n,MAP_TYPE_2D_GRID:o,TIMECODE_FORMAT:r}},wh9e:function(t,e,i){},zVQS:function(t,e,i){"use strict";var n=i("5dC8"),o=i.n(n);o.a}}]);